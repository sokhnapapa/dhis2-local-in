

<script>
	
	// Global Variables
	var monthlyPeriodTypeName = '$monthlyPeriodTypeName';
	var maxOrgUnitLevels = $maxOrgUnitLevels;
	var selOrgUnitId;
	
</script>


<h1>Tabular Analysis Form</h1>
<hr />

<form id="tabularAnalysisForm" name="tabularAnalysisForm" action=".action" method="post" onsubmit="return formValidations()" target="_blank">	
	<table align="center" style=" border-collapse: collapse; margin-top: 0;" cellpadding="0" cellspacing="0" width="100%" border=0>
		<colgroup>
        	<col width="40%">
  		    <col width="20%">
 		    <col width="40%">
  	    </colgroup>

		<tr>
			<td class="NormalB">$i18n.getString( "ga_filter_by_degroup" )<br>
		   		<select id="dataElementGroupId" name="dataElementGroupId" style="width:350px" onchange="getDataElements()">
                	<option value="$ALL">[ Select DataElementGroup / All ]</option>				                    
            			#foreach ( $degroup in $dataElementGroups )
            			<option value="$degroup.id" title="$degroup.name">$degroup.name</option>        			
     		        #end
     		    </select>
            </td>   
            <td class="NormalB">&nbsp;</td>
            <td class="NormalB">$i18n.getString( "compare_view" )<br>
            	<select id="deSelection" name="deSelection" style="width:350px" onchange="deSelectionChangeFuntion( 'availableDataElements', 'selectedServices' )">
                	<option value="dataelement" selected>DataElements</option>
                    <option value="optioncombo">Options in DataElements</option>
                </select>
            </td>
    	</tr>
        
        <tr>
			<td class="NormalB">&nbsp;</td>   
			<td class="NormalB">&nbsp;</td>
			<td class="NormalB">&nbsp;</td>
		</tr>
                			
		<tr>
			<td class="NormalB">$i18n.getString( "ga_available_delist" )<br>
				<select multiple size="5" id="availableDataElements" name="availableDataElements" style="width:350px; height:85px" ondblclick="moveSelectedById( 'availableDataElements', 'selectedServices' )">					
					#foreach ( $element in $dataElements )
						<option value="D:$element.id" title="$element.name">$element.name</option>					
				    #end
				</select>
			</td>
    		<td class="NormalB" align="center">
    			<br />
    			<input type="button" value="&gt;" style="width:40px" onclick="moveSelectedById( 'availableDataElements', 'selectedServices' )"><br>
                <input type="button" value="&lt;" style="width:40px" onclick="moveSelectedServices( 'selectedServices', 'availableDataElements', 'availableIndicators' )"><br>
			</td>
			<td class="NormalB" rowspan="5">    			
    			<table>
    				<tr>
    					<td class="NormalB">
							$i18n.getString( "ta_selected_servicelist" )<br />
							<select multiple id="selectedServices" name="selectedServices" style="width:350px; height:250px" ondblclick="moveSelectedServices( 'selectedServices', 'availableDataElements', 'availableIndicators' )">                           
							</select>    						
					    </td>
					    <td>
							<a href="javascript:moveup('selectedServices')"><img src="../images/move_up.png" alt="$i18n.getString( "move_up" )"></a><br><br>
							<a href="javascript:movedown('selectedServices')"><img src="../images/move_down.png" alt="$i18n.getString( "move_down" )"></a>
    					</td>
				    </tr>
			    </table>
			</td>
		</tr>
  		
		<tr>
			<td class="NormalB">&nbsp;<br/></td>   
			<td class="NormalB">&nbsp;<br/></td>
		</tr>

		<tr>
			<td class="NormalB">$i18n.getString( "ga_filter_by_indicatorgroup" )<br>
				<select id="indicatorGroupId" name="indicatorGroupId" style="width:350px" onchange="getIndicators()">
					<option value="$ALL">[ Select IndicatorGroup / All ]</option>                    
                    	#foreach ( $group in $indicatorGroups )
                    		<option value="$group.id">$group.name</option>
				    	#end
				</select>
			</td>   
			<td class="NormalB">&nbsp;</td>
		</tr>

		<tr>
			<td class="NormalB">&nbsp;</td>   
			<td class="NormalB">&nbsp;</td>
		</tr>
                			
		<tr>
			<td class="NormalB">$i18n.getString( "ga_available_indicatorlist" )<br>
				<select multiple size="5" id="availableIndicators" name="availableIndicators" style="width:350px; height:85px" ondblclick="moveSelectedById( 'availableIndicators', 'selectedServices' )">					
					#foreach ( $indicator in $indicators )
						<option value="I:$indicator.id">$indicator.name</option>
				    #end
				</select>
			</td>
			<td class="NormalB" align="center">
				<br />
				<input type="button" value="&gt;" style="width:40px" onclick="moveSelectedById( 'availableIndicators', 'selectedServices' )"><br>
				<input type="button" value="&lt;" style="width:40px" onclick="moveSelectedServices( 'selectedServices', 'availableDataElements', 'availableIndicators' )"><br>		
			</td>
		</tr>
		<tr>
			<td class="NormalB">&nbsp;</td>   
			<td class="NormalB">&nbsp;</td>
			<td class="NormalB">&nbsp;</td>
		</tr>
		<tr>
			<td class="NormalB">
				<table>
					<tr>
						<td class="NormalB">
							<input type="checkbox" id="ouSelCB" name="ouSelCB" onchange="ouSelCBChange()" value="ON" > Selected<br />
							$i18n.getString( "ga_orgunit" )<br>    			                    	
							<select name="orgUnitListCB" id="orgUnitListCB" multiple style="width: 175px;height: 100px" ondblclick="remOUFunction()" disabled >
							</select>						
						</td>
						<td class="NormalB">&nbsp;</td>
						<td class="NormalB">
							<br>
							OrgUnit Levels:<br>
							<select name="orgUnitLevelCB" id="orgUnitLevelCB" multiple style="width: 150px;height: 100px">
							</select>						
						</td>
					</tr>
				</table>
			</td>
			<td class="NormalB" align="center">&nbsp;</td>
			<td class="NormalB" align="center">
				<table>
					<tr>
						<td class="NormalB">
							PeriodType: <br>
							<select id="periodTypeLB" name="periodTypeLB" onchange="getPeriods()">								
								#foreach ( $periodType in $periodTypes )
									<option value="$periodType.id" #if($periodType.name==$monthlyPeriodTypeName) selected #end>$periodType.name</option>								
                         	    #end
                         	</select>
                            <br /><br />                        
						</td>
						<td>&nbsp;</td>
						<td align="right" class="NormalB">
							<input type="checkbox" id="aggPeriodCB" name="aggPeriodCB" onchange="aggPeriodCBChange()" value="ON"> Aggregated <br>
						</td>
					</tr>                       			    
					<tr>
						<td class="NormalB">
							$i18n.getString( "ga_from" )<br>
							<select id="sDateLB" name="sDateLB">																				
								#foreach($period in $monthlyPeriods)
									<option value="$period.id">$simpleDateFormat.format($period.startDate)</option>								
							    #end
							</select>							
						</td>
						<td>&nbsp;</td>
						<td align="right" class="NormalB">
							$i18n.getString( "ga_to" )<br>
							<select id="eDateLB" name="eDateLB">								
								#foreach($period in $monthlyPeriods)
									<option value="$period.id">$simpleDateFormat.format($period.endDate)</option>											  						
							    #end			  							
							</select>
						</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>                    			                   			        
					<tr>
						<td>
							<input type="submit" name="View Report" value="$i18n.getString( 'ta_viewreport' )" style="width: 120; height: 25; font-family:Arial; font-weight:bold; color:#000000" onclick="javascript:selButtonFunction('ViewChart')">
						</td>
						<td>&nbsp;</td>
						<td align="right">&nbsp;</td>
					</tr>                            
					<input type="hidden" name="selectedButton" id="selectedButton">
				</table>    
			</td>
		</tr>
	</table>							
</form>